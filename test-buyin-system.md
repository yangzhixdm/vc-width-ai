# 买入筹码系统和排行榜功能测试指南

## 功能概述

已成功实现以下功能：

### 1. 买入筹码系统
- ✅ 玩家每次可以买入2000筹码（可自定义金额）
- ✅ 记录玩家总共买入的筹码数量
- ✅ 支持多次买入
- ✅ 当玩家筹码为0时，显示买入按钮

### 2. 实时筹码排行榜
- ✅ 显示在游戏界面左上角
- ✅ 按当前筹码数量排序
- ✅ 显示水上水下情况：
  - 红色显示盈利（如：+3000）
  - 绿色显示亏损（如：-2000）
- ✅ 显示总买入金额
- ✅ 筹码为0的玩家显示买入按钮

## 测试步骤

### 后端测试
1. 启动服务器：`cd server && npm start`
2. 创建游戏并添加玩家
3. 测试买入API：`POST /api/games/{gameId}/players/{playerId}/buy-in`
4. 验证数据库中的totalBuyIn字段更新

### 前端测试
1. 启动客户端：`cd client && npm start`
2. 访问游戏界面
3. 观察左上角的筹码排行榜
4. 测试买入功能：
   - 点击筹码为0玩家的"买入"按钮
   - 在买入对话框中输入金额
   - 确认买入
   - 观察排行榜更新

## 技术实现

### 数据库变更
- 在players表中添加了`totalBuyIn`字段
- 默认值为2000（初始买入）
- 每次买入时累加此字段

### API端点
- `POST /api/games/{gameId}/players/{playerId}/buy-in`
- 请求体：`{ "amount": 2000 }`
- 响应：更新后的玩家信息

### 前端组件
- `ChipLeaderboard`: 筹码排行榜组件
- `BuyInDialog`: 买入筹码对话框
- 集成到`GameTable`主界面

## 样式特点
- 金色边框和渐变背景
- 响应式设计，支持移动端
- 动画效果和悬停状态
- 清晰的盈亏显示（红绿配色）

## 注意事项
- 买入金额默认为2000，但可以自定义
- 排行榜实时更新
- 支持多次买入
- 数据库迁移已自动执行
